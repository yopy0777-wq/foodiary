(()=>{var e={};e.id=165,e.ids=[165],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u});var n=r(482),s=r(9108),i=r(2563),o=r.n(i),a=r(8300),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,6313)),"C:\\Tools\\foodiary\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=[],d="/_not-found",p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},6315:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},1543:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2704,23)),Promise.resolve().then(r.bind(r,5814))},5814:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>a,useAuth:()=>l});var n=r(5344),s=r(3729),i=r(8704);let o=(0,s.createContext)(void 0);function a({children:e}){let[t,r]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),[u,c]=(0,s.useState)(!0),d=(0,i.e)(),p=(0,i.j)(),h=(0,s.useCallback)(async e=>{if(!d)return null;let{data:t,error:r}=await d.from("profiles").select("*").eq("id",e).single();return r?(console.error("プロフィール取得エラー:",r),null):t},[d]);(0,s.useEffect)(()=>{if(!d){c(!1);return}(async()=>{let{data:{session:e}}=await d.auth.getSession();e?.user&&(r(e.user),l(await h(e.user.id))),c(!1)})();let{data:{subscription:e}}=d.auth.onAuthStateChange(async(e,t)=>{t?.user?(r(t.user),l(await h(t.user.id))):(r(null),l(null)),c(!1)});return()=>{e.unsubscribe()}},[d,h]);let x={user:t,profile:a,loading:u,signUp:async(e,t)=>{if(!d)return{error:Error("Supabaseが設定されていません")};let{error:r}=await d.auth.signUp({email:e,password:t,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});return{error:r}},signIn:async(e,t)=>{if(!d)return{error:Error("Supabaseが設定されていません")};let{error:r}=await d.auth.signInWithPassword({email:e,password:t});return{error:r}},signOut:async()=>{d&&(await d.auth.signOut(),r(null),l(null))},isAuthenticated:!!t,plan:a?.plan||"free",isConfigured:p};return n.jsx(o.Provider,{value:x,children:e})}function l(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8704:(e,t,r)=>{"use strict";r.d(t,{e:()=>l,j:()=>o});var n=r(3974);let s="https://lebexzzbtaiuegztwupu.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYmV4enpidGFpdWVnenR3dXB1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1NDQ5ODYsImV4cCI6MjA4NTEyMDk4Nn0.R0AGgMNWuhnWeNz6TpGQOB9yVWj7NGkZDGV_M4o9Sgo",o=()=>!!(s&&i),a=null,l=()=>o()?(a||(a=(0,n.createBrowserClient)(s,i)),a):null},6313:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,metadata:()=>h,viewport:()=>p});var n=r(5036),s=r(3640),i=r.n(s);r(5023);var o=r(5411),a=r(6843);let l=(0,a.createProxy)(String.raw`C:\Tools\foodiary\src\contexts\AuthContext.tsx`),{__esModule:u,$$typeof:c}=l;l.default;let d=(0,a.createProxy)(String.raw`C:\Tools\foodiary\src\contexts\AuthContext.tsx#AuthProvider`);(0,a.createProxy)(String.raw`C:\Tools\foodiary\src\contexts\AuthContext.tsx#useAuth`);let p={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#10b981"},h={title:"食事記録アプリ",description:"食べたものを写真とメモで記録",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"食事記録"}};function x({children:e}){return(0,n.jsxs)("html",{lang:"ja",children:[(0,n.jsxs)("head",{children:[n.jsx("link",{rel:"icon",href:"/icon.svg",type:"image/svg+xml"}),n.jsx("link",{rel:"apple-touch-icon",href:"/icon.svg"})]}),(0,n.jsxs)("body",{className:i().className,children:[n.jsx(d,{children:e}),n.jsx(o.default,{id:"register-sw",strategy:"afterInteractive",children:`
            // Service Worker がサポートされているか確認
            if ('serviceWorker' in navigator) {
              // ページ読み込み完了後に登録
              window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(
                  (registration) => {
                    console.log('Service Worker registered:', registration);
                  },
                  (error) => {
                    console.log('Service Worker registration failed:', error);
                  }
                );
              });
            }
          `})]})]})}},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,505],()=>r(5779));module.exports=n})();