(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},2621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(482),a=s(9108),n=s(2563),i=s.n(n),o=s(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1136)),"C:\\Tools\\foodiary\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,6313)),"C:\\Tools\\foodiary\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Tools\\foodiary\\src\\app\\page.tsx"],u="/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9653:(e,t,s)=>{Promise.resolve().then(s.bind(s,4673))},8428:(e,t,s)=>{"use strict";var r=s(4767);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},4673:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5344),a=s(3729),n=s(6506),i=s(2070),o=s(8428);function l({entry:e,onDelete:t}){let s=(0,o.useRouter)(),[n,i]=(0,a.useState)("");return(0,a.useEffect)(()=>{if(e.photo){let t=URL.createObjectURL(e.photo);return i(t),()=>URL.revokeObjectURL(t)}},[e.photo]),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[n&&r.jsx("div",{className:"w-full h-64 bg-gray-100",children:r.jsx("img",{src:n,alt:e.mealType,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full mb-2",children:e.mealType}),e.menu&&r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:e.menu})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>s.push(`/edit/${e.id}`),className:"text-gray-500 hover:text-green-600 transition p-2 hover:bg-green-50 rounded-lg",title:"編集",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:()=>t(e.id),className:"text-red-500 hover:text-red-700 transition p-2 hover:bg-red-50 rounded-lg",title:"削除",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,r.jsxs)("p",{className:"text-gray-600 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(e.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"}),e.time&&(0,r.jsxs)("span",{className:"ml-3 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.time]})]})]})]})}function d(){return r.jsx(n.default,{href:"/add",className:"fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white rounded-full p-4 shadow-2xl transition transform hover:scale-110 active:scale-95 z-50",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}var c=s(5814);let u={free:"フリープラン",member:"無料会員",premium:"プレミアム"},x={free:"bg-gray-100 text-gray-600",member:"bg-green-100 text-green-600",premium:"bg-yellow-100 text-yellow-600"};function m(){let{user:e,plan:t,loading:s,signOut:i,isAuthenticated:o}=(0,c.useAuth)(),[l,d]=(0,a.useState)(!1);return s?r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 animate-pulse"}):o?(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{onClick:()=>d(!l),className:"flex items-center space-x-2 focus:outline-none",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-white font-medium",children:e?.email?.charAt(0).toUpperCase()})}),l&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[r.jsx("p",{className:"text-sm text-gray-600 truncate",children:e?.email}),r.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded ${x[t]}`,children:u[t]})]}),(0,r.jsxs)("div",{className:"p-2",children:[r.jsx(n.default,{href:"/settings",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition",onClick:()=>d(!1),children:"設定"}),"premium"!==t&&r.jsx(n.default,{href:"/premium",className:"block px-4 py-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition",onClick:()=>d(!1),children:"プレミアムにアップグレード"}),r.jsx("button",{onClick:()=>{i(),d(!1)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:"ログアウト"})]})]})]})]}):r.jsx(n.default,{href:"/auth/login",className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded-lg transition",children:"ログイン"})}function h(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),{user:u,isAuthenticated:x,loading:h}=(0,c.useAuth)(),p=async()=>{try{let e=await (0,i.C0)({userId:u?.id,isAuthenticated:x});t(e)}catch(e){console.error("データの読み込みに失敗しました:",e)}finally{o(!1)}};(0,a.useEffect)(()=>{h||p()},[h,x,u?.id]);let g=async e=>{if(confirm("この記録を削除しますか?"))try{await (0,i.pO)(e,{userId:u?.id,isAuthenticated:x}),await p()}catch(e){console.error("削除に失敗しました:",e),alert("削除に失敗しました")}};return(0,r.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white pb-20",children:[(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[(0,r.jsxs)("header",{className:"mb-8 flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\uD83C\uDF7D️ 食事記録"}),r.jsx("p",{className:"text-gray-600",children:"食べたものを記録しよう"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(n.default,{href:"/settings",className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition",title:"設定",children:(0,r.jsxs)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r.jsx(m,{})]})]}),s?(0,r.jsxs)("div",{className:"text-center py-20",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-20",children:[r.jsx("p",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),r.jsx("p",{className:"text-gray-600 mb-2",children:"まだ記録がありません"}),r.jsx("p",{className:"text-sm text-gray-500",children:"右下のボタンから記録を追加しましょう"})]}):r.jsx("div",{className:"space-y-4",children:e.map(e=>r.jsx(l,{entry:e,onDelete:g},e.id))})]}),r.jsx(d,{})]})}},1136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`C:\Tools\foodiary\src\app\page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,505,419,284],()=>s(2621));module.exports=r})();