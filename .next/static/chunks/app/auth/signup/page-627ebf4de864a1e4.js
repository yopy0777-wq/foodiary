(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{9336:function(e,r,t){Promise.resolve().then(t.bind(t,9971))},9971:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var s=t(3827),n=t(4090),l=t(8792),a=t(3779);function i(){let[e,r]=(0,n.useState)(""),[t,i]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[o,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),[h,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1),{signUp:b,isConfigured:j}=(0,a.useAuth)();if(!j)return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white flex items-center justify-center px-4",children:(0,s.jsx)("div",{className:"max-w-md w-full",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"認証機能は準備中です"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["現在、会員登録・ログイン機能は利用できません。",(0,s.jsx)("br",{}),"フリープランとしてご利用ください。"]}),(0,s.jsx)(l.default,{href:"/",className:"inline-block px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition",children:"ホームへ戻る"})]})})});let w=async r=>{if(r.preventDefault(),x(""),t!==d){x("パスワードが一致しません");return}if(!o){x("利用規約に同意してください");return}g(!0);let{error:s}=await b(e,t);if(s){s.message.includes("already registered")?x("このメールアドレスは既に登録されています"):x("登録に失敗しました。もう一度お試しください"),g(!1);return}p(!0),g(!1)};return f?(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white flex items-center justify-center px-4",children:(0,s.jsx)("div",{className:"max-w-md w-full",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"確認メールを送信しました"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:[e," に確認メールを送信しました。",(0,s.jsx)("br",{}),"メール内のリンクをクリックして登録を完了してください。"]}),(0,s.jsx)(l.default,{href:"/auth/login",className:"inline-block px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition",children:"ログイン画面へ"})]})})}):(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"新規会員登録"}),(0,s.jsx)("p",{className:"text-gray-600",children:"アカウントを作成して便利な機能を使おう"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[m&&(0,s.jsx)("div",{className:"bg-red-100 text-red-800 p-3 rounded-lg text-sm",children:m}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),(0,s.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>r(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"example@email.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),(0,s.jsx)("input",{id:"password",type:"password",value:t,onChange:e=>i(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"6文字以上"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード（確認）"}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",value:d,onChange:e=>c(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"もう一度入力"})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{id:"agreed",type:"checkbox",checked:o,onChange:e=>u(e.target.checked),className:"mt-1 h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,s.jsxs)("label",{htmlFor:"agreed",className:"ml-2 text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"text-green-600 hover:underline cursor-pointer",children:"利用規約"}),"と",(0,s.jsx)("span",{className:"text-green-600 hover:underline cursor-pointer",children:"プライバシーポリシー"}),"に同意します"]})]}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"w-full py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-medium rounded-lg transition",children:h?"登録中...":"登録する"})]}),(0,s.jsxs)("div",{className:"mt-6 text-center space-y-3",children:[(0,s.jsxs)("p",{className:"text-gray-600",children:["既にアカウントをお持ちの方は",(0,s.jsx)(l.default,{href:"/auth/login",className:"text-green-600 hover:underline ml-1",children:"ログイン"})]}),(0,s.jsx)("div",{className:"border-t pt-3",children:(0,s.jsx)(l.default,{href:"/",className:"text-gray-500 hover:text-gray-700 text-sm",children:"登録せずに使う（フリープラン）"})})]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"会員特典"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"ローカルフォルダへの自動保存（Android/PC）"]}),(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"クラウド保存でデータ永続化（プレミアム）"]}),(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"複数デバイス間での同期（プレミアム）"]})]})]})]})})}},3779:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return i},useAuth:function(){return d}});var s=t(3827),n=t(4090),l=t(4958);let a=(0,n.createContext)(void 0);function i(e){let{children:r}=e,[t,i]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[o,u]=(0,n.useState)(!0),m=(0,l.e)(),x=(0,l.j)(),h=(0,n.useCallback)(async e=>{if(!m)return null;let{data:r,error:t}=await m.from("profiles").select("*").eq("id",e).single();return t?(console.error("プロフィール取得エラー:",t),null):r},[m]);(0,n.useEffect)(()=>{if(!m){u(!1);return}(async()=>{let{data:{session:e}}=await m.auth.getSession();(null==e?void 0:e.user)&&(i(e.user),c(await h(e.user.id))),u(!1)})();let{data:{subscription:e}}=m.auth.onAuthStateChange(async(e,r)=>{(null==r?void 0:r.user)?(i(r.user),c(await h(r.user.id))):(i(null),c(null)),u(!1)});return()=>{e.unsubscribe()}},[m,h]);let g={user:t,profile:d,loading:o,signUp:async(e,r)=>{if(!m)return{error:Error("Supabaseが設定されていません")};let{error:t}=await m.auth.signUp({email:e,password:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});return{error:t}},signIn:async(e,r)=>{if(!m)return{error:Error("Supabaseが設定されていません")};let{error:t}=await m.auth.signInWithPassword({email:e,password:r});return{error:t}},signOut:async()=>{m&&(await m.auth.signOut(),i(null),c(null))},isAuthenticated:!!t,plan:(null==d?void 0:d.plan)||"free",isConfigured:x};return(0,s.jsx)(a.Provider,{value:g,children:r})}function d(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4958:function(e,r,t){"use strict";t.d(r,{e:function(){return d},j:function(){return a}});var s=t(6070);let n="https://lebexzzbtaiuegztwupu.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYmV4enpidGFpdWVnenR3dXB1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1NDQ5ODYsImV4cCI6MjA4NTEyMDk4Nn0.R0AGgMNWuhnWeNz6TpGQOB9yVWj7NGkZDGV_M4o9Sgo",a=()=>!!(n&&l),i=null,d=()=>a()?(i||(i=(0,s.createBrowserClient)(n,l)),i):null}},function(e){e.O(0,[400,792,971,69,744],function(){return e(e.s=9336)}),_N_E=e.O()}]);